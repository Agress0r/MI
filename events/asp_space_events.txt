namespace = asp
# Событие с лидером - роботом.
ship_event = {
	id = asp.1
	title = "asp.1.name"
	desc = "asp.1.desc"
	picture = GFX_evt_ship_travel
	show_sound = event_alien_signal
	hide_window = no
	is_triggered_only = yes

	trigger = {
		owner = {
			NOT = {
				has_country_flag = asp_leader_event_happened
			}
		}
	}

	
		option = {
			name = asp.1.a
			set_country_flag = asp_leader_event_happened
			owner = { country_event = { id = asp.2 } }
		}

	    option = {
		name = asp.1.b
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# Само событие с лидером
country_event = {
	id = asp.2
	title = "asp.2.name"
	desc = "asp.2.desc"
	hide_window = no
	show_sound = event_mystic_reveal_light

	diplomatic = yes

	is_triggered_only = yes

	picture_event_data = {
		portrait = ai_crisis_2
	}
	
	trigger = {
		owner = {
			NOT = {
				has_country_flag = asp_leader_event_happened
			}
		}
	}

immediate = {
			if = {
				limit = {
				   owner = {
					   NOT = {
					     	has_country_flag = asp_leader_gained
					         }
				}
			 }
			 create_species = {
				name = "NAME_asp_mechanical_species"
				class = MACHINE #Можно оставить MACHINE, но в таком раскладе врядли ли синтетика получится начислить.
				portrait = ai_crisis_2
				namelist = "AI"
				traits = {
					trait = trait_mechanical
					trait = trait_robot_mass_produced
					trait = trait_robot_luxurious
					trait = trait_robot_learning_algorithms
					trait = trait_robot_high_maintenance
					trait = trait_robot_logic_engines
				}
				effect = {
					save_global_event_target_as = asp_leader_robo_species
				}
			}
		}
      }
			 # Решил остановиться на синтах или машинах, потом подумаю и возможно изменю решение
			 # По возможности добавить комнату где ИИ "типо говорит" и даёт выбор, нежели просто событие с кнопками.
					 option = {
						name = asp_game_start.2.a
						trigger = {
							has_authority = auth_machine_intelligence # Лидер губернатор будет доступен только для машин т.к если выбрать губера из портретов кризиса то там он слишком убого (в отображении на планете, в лидерах все ок)
						}
                        custom_tooltip = asp.leader.accepted.tooltip
					    create_leader = {
						event_leader = yes
						class = governor
						name = "Executive unit F90"
						species = event_target:asp_leader_robo_species
						skill = 5
					 }
                    hidden_effect = { last_created_leader = {set_age = 314 } }
				 }

					option = {
						name = asp_game_start.2.b
						custom_tooltip = asp.leader.accepted.tooltip
					    create_leader = {
						event_leader = yes
						class = scientist
						name = "Executive unit F99"
						species = event_target:asp_leader_robo_species
						skill = 5
					}
					hidden_effect = { last_created_leader = {set_age = 314 } }
				 }

					option = {
						name = asp_game_start.2.c
						custom_tooltip = asp.leader.accepted.tooltip
					    create_leader = {
						event_leader = yes
						class = admiral
						name = "Executive unit F91"
						species = event_target:asp_leader_robo_species
						skill = 5
					}
					hidden_effect = { last_created_leader = {set_age = 314 } }
				 }

					option = {
						name = asp_game_start.2.d
						custom_tooltip = asp.leader.accepted.tooltip
					    create_leader = {
						event_leader = yes
						class = general
						name = "Executive unit F93"
						species = event_target:asp_leader_robo_species
						skill = 5
					}
					hidden_effect = { last_created_leader = {set_age = 314 } }
				 }
                 # Можно эффект на проверку создать дабы кучу текста таким макаром не создавать в основном файле с событием, по типу give_next_ai_tech_option_effect из ивента федерации
				 option = {
					name = asp_game_start.2.e
					if = {
						limit = {
						NOT = { has_technology = "tech_administrative_ai" }	
						}
						add_tech_progress = {
							tech = tech_administrative_ai
							progress = 0.50
						}
					}
						else_if = {
							limit = {
								 has_technology = "tech_administrative_ai"
								 NOT = { has_technology = "tech_self_aware_logic" }
								}
								add_tech_progress = {
									tech = tech_self_aware_logic
									progress = 0.35
						}
				}
				else_if = {
					limit = {
						has_technology = "tech_administrative_ai"
						has_technology = "tech_self_aware_logic"
						NOT = { has_technology = "tech_sapient_ai" }
					}
					add_tech_progress = {
						tech = tech_sapient_ai
						progress = 0.25
			 }
		   }
		   else = {
			   random_list = {
				   33 = {
					add_monthly_resource_mult = {
						resource = society_research
						value = @tier3researchreward
						min = @tier3researchmin
						max = @tier3researchmax
					}
				   }
				   33 = {
					add_monthly_resource_mult = {
						resource = engineering_research
						value = @tier3researchreward
						min = @tier3researchmin
						max = @tier3researchmax
					}
				   }
				   33 = {
					add_monthly_resource_mult = {
						resource = physics_research
						value = @tier3researchreward
						min = @tier3researchmin
						max = @tier3researchmax
					}
				}
			}
		}
	}
}
# Инициализатор события с дополнительными редкими ресурсами
# Не знаю на сколько часто будет оно падать, по этому можно рандомные текстовики создать на всякий пожарный
ship_event = {
	id = asp.3
	hide_window = yes
	is_triggered_only = yes


	trigger = {
		this = {
			OR = {
				from.planet = {
				has_resource = {
					type = minerals
					amount > 0
				}
				has_resource = {
					type = rare_crystals
					amount > 0
				}
			  }
			}
		}
	}
	immediate = {
		from.planet = {
		save_event_target_as = asp_mineral_stockpile
		owner = { country_event = { id = asp.4 days = 30 } }
		}
	}
}
# Событие с дополнительными редкими ресурсами
country_event = {
	id = asp.4
	title = "asp.4.name"
	desc = "asp.4.desc"
	hide_window = no
	picture = GFX_evt_ship_in_orbit
	show_sound = event_default
	is_triggered_only = yes

	trigger = {
		event_target:asp_mineral_stockpile = {
			OR = {
				from.planet = {
				has_resource = {
					type = minerals
					amount > 0
				}
				has_resource = {
					type = rare_crystals
					amount > 0
				}
			  }
			}
		}
	}

	option = {
		name = "asp.4.a"
		owner = {
			locked_random_list = {
				33 = {
					add_resource = { volatile_motes = 65 }
				}
				33 = {
					add_resource = { rare_crystals = 65 }
				}
				33 = {
					add_resource = { exotic_gases = 65 }
				}
			}
		}
	}
}

# Событие с найденными артефактами на астероиде
ship_event = {
	id = asp.5
	title = "asp.5.name"
	desc = "asp.5.desc"
	hide_window = no
	picture = GFX_evt_gas_giant_station
	show_sound = event_default
	is_triggered_only = yes


	trigger = {
		owner = { has_ancrel = yes
		NOT = {
			has_country_flag = asp_artifact_event_cooldown
		      } 
	    }
		from.planet = {
			is_asteroid = yes
		}
	}

	#mean_time_to_happen = { days = 40 }

	option = {
		name = OK
		owner = {
			locked_random_list = {
				50 = {
					owner = { small_artifact_reward = yes}
				}
				50 = {
					owner = { medium_artifact_reward = yes }
				}
			}
			set_timed_country_flag = { flag = asp_artifact_event_cooldown days = 720 }
		}
	}
}
# Событие с увелчинием производства энергии на объекте
ship_event = {
	id = asp.6
	title = "asp.6.name"
	desc = "asp.6.desc"
	hide_window = no
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	is_triggered_only = yes

	trigger = {
		from.planet = {
			has_resource = {
				type = energy
				amount > 0
			}
		}
	}

	#mean_time_to_happen = { days = 40 }

	option = {
		name = EXCELLENT
		From = {
			locked_random_list = {
				33 = {
					From = { add_deposit = d_energy_3 }
				}
				33 = {
					From = { add_deposit = d_energy_4 }
				}
				33 = {
					From = { add_deposit = d_energy_5 }
				}
			}
		}
	}
}
# Событие с найденной раскопкой - раскопку же нужно продумать
ship_event = {
	id = asp.7
	title = "asp.7.name"
	desc = "asp.7.desc"
	hide_window = no
	picture = GFX_evt_ancient_records
	show_sound = event_finding_loot
	is_triggered_only = yes

	trigger = {
		from.planet = {
			NOT = {
				exists = archaeological_site
			}
			is_star = no
		}
		owner = { has_ancrel = yes
		NOT = {
			has_country_flag = asp_ancrel_site
		      }
			}
		}

	#mean_time_to_happen = { days = 40 }

	option = {
		name = EXCELLENT
		owner = {
			set_country_flag = asp_ancrel_site
		}
		From.planet = {
			create_archaeological_site = asp_ancrel_site
		}
	}
}