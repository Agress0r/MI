namespace = asp

##########################################
# All possible events from the ASP mod
# Written and edited by Agress0r Komarov
##########################################
# Все события из стандартных и уникальных ивентов
# Написал и отредактировал Agress0r Komarov
##########################################

### Событие с лидером - роботом - инициализатор
ship_event = {
	id = asp.1
	title = "asp.1.name"
	desc = "asp.1.desc"
	picture = GFX_evt_ship_travel
	show_sound = event_alien_signal
	hide_window = no
	is_triggered_only = yes

	trigger = {
		owner = {
			is_ai = no
			NOT = {
				has_country_flag = asp_leader_gained
				has_country_flag = asp_leader_event_happened
			}
		}
	}

	
		option = {
			name = asp.1.a
			set_country_flag = asp_leader_event_happened
			owner = { country_event = { id = asp.2} }
		}

	    option = {
		name = asp.1.b
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			add_resource = {
				alloys = 350
			}
		}
	}
}

# Само событие с лидером Роботом
country_event = {
	id = asp.2
	title = "asp.2.name"
	desc = "asp.2.desc"
	hide_window = no
	show_sound = event_mystic_reveal_light

	diplomatic = yes

	is_triggered_only = yes

	picture_event_data = {
		portrait = ai_crisis_2
	}
	
	trigger = {
		owner = {
			NOT = {
				has_country_flag = asp_leader_gained
			}
		}
	}

immediate = {
			if = {
				limit = {
				   owner = {
					   NOT = {
					     	has_country_flag = asp_leader_gained
					         }
				}
			 }
			 create_species = {
				name = "NAME_asp_mechanical_species"
				class = MACHINE #Можно оставить MACHINE, но в таком раскладе врядли ли синтетика получится начислить.
				portrait = ai_crisis_2
				namelist = "AI"
				traits = {
					trait = trait_mechanical
					trait = trait_robot_mass_produced
					trait = trait_robot_luxurious
					trait = trait_robot_high_maintenance
					trait = trait_robot_logic_engines
					trait = trait_robot_enhanced_memory
					trait = trait_robot_learning_algorithms
				}
				effect = {
					save_global_event_target_as = asp_leader_robo_species
				}
			}

			create_species = {
				name = "NAME_asp_mechanical_species_gov"
				class = ROBOT
				portrait = "sd_mol_robot"
				namelist = "AI"
				traits = {
					trait = trait_mechanical
					trait = trait_robot_mass_produced
					trait = trait_robot_luxurious
					trait = trait_robot_high_maintenance
					trait = trait_robot_logic_engines
					trait = trait_robot_enhanced_memory
					trait = trait_robot_learning_algorithms
				}
				effect = {
					save_global_event_target_as = asp_leader_robo_species_gov
				}
			}
		}
      }
			 # Решил остановиться на синтах или машинах, потом подумаю и возможно изменю решение
			 # По возможности добавить комнату где ИИ "типо говорит" и даёт выбор, нежели просто событие с кнопками.
					 option = {
						name = asp_game_start.2.a
                        custom_tooltip = asp.leader.accepted.tooltip
					    create_leader = {
						event_leader = yes
						class = governor
						name = "Executive unit F90"
						species = event_target:asp_leader_robo_species_gov
						skill = 5
					 }
                    hidden_effect = { last_created_leader = {set_age = 314 } }
					set_country_flag = asp_leader_gained
				 }

					option = {
						name = asp_game_start.2.b
						custom_tooltip = asp.leader.accepted.tooltip
					    create_leader = {
						event_leader = yes
						class = scientist
						name = "Executive unit F99"
						species = event_target:asp_leader_robo_species
						skill = 5
					}
					hidden_effect = { last_created_leader = {set_age = 314 } }
					set_country_flag = asp_leader_gained
				 }

					option = {
						name = asp_game_start.2.c
						custom_tooltip = asp.leader.accepted.tooltip
					    create_leader = {
						event_leader = yes
						class = admiral
						name = "Executive unit F91"
						species = event_target:asp_leader_robo_species
						skill = 5
					}
					hidden_effect = { last_created_leader = {set_age = 314 } }
					set_country_flag = asp_leader_gained
				 }

					option = {
						name = asp_game_start.2.d
						custom_tooltip = asp.leader.accepted.tooltip
					    create_leader = {
						event_leader = yes
						class = general
						name = "Executive unit F93"
						species = event_target:asp_leader_robo_species
						skill = 5
					}
					hidden_effect = { last_created_leader = {set_age = 314 } }
					set_country_flag = asp_leader_gained
				 }
                 # Можно эффект на проверку создать дабы кучу текста таким макаром не создавать в основном файле с событием, по типу give_next_ai_tech_option_effect из ивента федерации
				 option = {
					name = asp_game_start.2.e
					if = {
						limit = {
						NOT = { has_technology = "tech_administrative_ai" }	
						}
						add_tech_progress = {
							tech = tech_administrative_ai
							progress = 0.50
						}
					}
						else_if = {
							limit = {
								 has_technology = "tech_administrative_ai"
								 NOT = { has_technology = "tech_self_aware_logic" }
								}
								add_tech_progress = {
									tech = tech_self_aware_logic
									progress = 0.35
						}
				}
				else_if = {
					limit = {
						has_technology = "tech_administrative_ai"
						has_technology = "tech_self_aware_logic"
						NOT = { has_technology = "tech_sapient_ai" }
					}
					add_tech_progress = {
						tech = tech_sapient_ai
						progress = 0.25
			 }
		   }
		   else = {
			   random_list = {
				   33 = {
					add_monthly_resource_mult = {
						resource = society_research
						value = @tier3researchreward
						min = @tier3researchmin
						max = @tier3researchmax
					}
				   }
				   33 = {
					add_monthly_resource_mult = {
						resource = engineering_research
						value = @tier3researchreward
						min = @tier3researchmin
						max = @tier3researchmax
					}
				   }
				   33 = {
					add_monthly_resource_mult = {
						resource = physics_research
						value = @tier3researchreward
						min = @tier3researchmin
						max = @tier3researchmax
					}
				}
			}
		}
	}
}

# Событие с дополнительными редкими ресурсами
ship_event = {
	id = asp.4
	title = "asp.4.name"
	desc = "asp.4.desc"
	hide_window = no
	picture = GFX_evt_ship_in_orbit
	show_sound = event_default
	is_triggered_only = yes

	trigger = {
		from.planet = {
				has_resource = {
					type = minerals
					amount > 0
				}
	  }
           owner = { 
	          NOT = {
		           has_country_flag = asp_rare_resources_event_cooldown
		  }
		}
 }

	option = {
		name = "asp.4.a"
		owner = {
			locked_random_list = {
				33 = {
					add_resource = { 
						volatile_motes = 85
					}
				}
				33 = {
					add_resource = {
						rare_crystals = 85
					}
				}
				33 = {
					add_resource = { 
						exotic_gases = 85
					}
				}
			}
		}
		set_timed_country_flag = { flag = asp_rare_resources_event_cooldown days = 540 }
	}
}

# Событие с найденными артефактами на астероиде
# Ancrel це Ancient Relics т.е проверка длс - зачем кому-то релики если нету длс?
ship_event = {
	id = asp.5
	title = "asp.5.name"
	desc = "asp.5.desc"
	hide_window = no
	picture = GFX_evt_gas_giant_station
	show_sound = event_default
	is_triggered_only = yes

      
	trigger = {
		owner = { has_ancrel = yes 
		NOT = {
			has_country_flag = asp_artifact_event_cooldown
		      } 
	    }
		from.planet = {
			is_asteroid = yes
		}
	}

	#mean_time_to_happen = { days = 40 }

	option = {
		name = OK
		owner = {
			locked_random_list = {
				50 = {
					owner = { small_artifact_reward = yes}
				}
				50 = {
					owner = { medium_artifact_reward = yes }
				}
			}
			set_timed_country_flag = { flag = asp_artifact_event_cooldown days = 540 }
		}
	}
}
# Событие с увелчинием производства энергии на объекте
ship_event = {
	id = asp.6
	title = "asp.6.name"
	desc = "asp.6.desc"
	hide_window = no
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	is_triggered_only = yes

	trigger = {
		from.planet = {
			has_resource = {
				type = energy
				amount > 0
			}
		}
		owner = { 
		NOT = {
			has_country_flag = asp_energy_event_cooldown
		      }
			}
	}

	#mean_time_to_happen = { days = 40 }

	option = {
		name = EXCELLENT
		From = {
			locked_random_list = {
				33 = {
					From = { add_deposit = d_energy_3 }
				}
				33 = {
					From = { add_deposit = d_energy_4 }
				}
				33 = {
					From = { add_deposit = d_energy_5 }
				}
			}
		}
		set_timed_country_flag = { flag = asp_energy_event_cooldown days = 670 }
	}
}
# Событие с найденной раскопкой - раскопку же нужно продумать
ship_event = {
	id = asp.7
	title = "asp.7.name"
	desc = "asp.7.desc"
	hide_window = no
	picture = GFX_evt_ancient_records
	show_sound = event_super_explosion
	is_triggered_only = yes

	trigger = {
		from.planet = {
			NOT = {
				exists = archaeological_site
			}
			is_star = no
			is_asteroid = no
		}
		owner = {
		has_ancrel = yes
		is_ai = no
		NOT = {
			has_country_flag = asp_ancrel_site
		      }
			}
	}

	option = {
		name = EXCELLENT
		owner = {
			set_country_flag = asp_ancrel_site
		}
		From.planet = {
			create_archaeological_site = asp_ancrel_site
		}
		root = {
			fleet = {
				destroy_fleet = this
			}
		}
	}
}
### Потерянный корабль угасшей империи - нужны границы рядом с угашкой
ship_event = {
	id = asp.8
	title = "asp.8.name"
	desc = "asp.8.desc"
	hide_window = no
	picture = GFX_evt_ship_in_orbit_2
	show_sound = event_sensor_ping
	is_triggered_only = yes
	fire_only_once = yes


	trigger = {
		is_ai = no
		closest_system = {
			max_steps = 1
			limit = {
				exists = owner
				owner = {
					OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
					}
				}
			}
		}
	}

	immediate = {
		closest_system = {
			max_steps = 1
			limit = {
				exists = owner
				owner = {
					OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
					}
				}
			}
			this.owner = { save_event_target_as = asp_fe_empire }
		}
		create_fleet = {
			settings = {
				spawn_debris = no
				can_change_composition = no
				uses_naval_capacity = yes
			}
			effect = {
				set_owner = event_target:asp_fe_empire
				create_ship = {
					name = Xentoras
					design = "Lexon"
				}
				set_location = {
					target = root
					distance = 20
					angle = 0
				}
				set_fleet_stance = passive
				set_aggro_range_measure_from = self
				set_aggro_range = 350
				save_event_target_as = asp_fallen_empire_ship
				set_owner = root
			}
		}
	}

	option = {
		name = asp.8.a
		custom_tooltip = asp.8.a.tooltip
	}

	option = {
		name = asp.8.b
		custom_tooltip = asp.8.b.tooltip
		hidden_effect = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
				min = @tier2researchmin
				max = @tier3researchmax
			}
			add_resource = {
				alloys = 760
			}
			destroy_fleet = event_target:asp_fallen_empire_ship
		}
	}
}
# Событие с увелчинием производства минералов на объекте
ship_event = {
	id = asp.9
	title = "asp.9.name"
	desc = "asp.9.desc"
	hide_window = no
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	is_triggered_only = yes

	trigger = {
		from.planet = {
			has_resource = {
				type = minerals
				amount > 0
			}
		}
		owner = { 
		NOT = {
			has_country_flag = asp_mineral_event_cooldown
		      }
			}
	}

	#mean_time_to_happen = { days = 40 }

	option = {
		name = EXCELLENT
		From = {
			locked_random_list = {
				33 = {
					From = { add_deposit = d_minerals_3 }
				}
				33 = {
					From = { add_deposit = d_minerals_4 }
				}
				33 = {
					From = { add_deposit = d_minerals_5 }
				}
			}
		}
		set_timed_country_flag = { flag = asp_mineral_event_cooldown days = 670 }
	}
}
# Событие с увелчинием производства редкого ресурса на объекте
ship_event = {
	id = asp.10
	title = "asp.10.name"
	desc = "asp.10.desc"
	hide_window = no
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	is_triggered_only = yes

	trigger = {
		from.planet = {
			has_resource = {
				type = rare_crystals
				amount > 0
			}
			has_resource = {
				type = exotic_gases
				amount > 0
			}
			has_resource = {
				type = volatile_motes
				amount > 0
			}
		}
		owner = {
		NOT = {
			has_country_flag = asp_rare_resource_cooldown
		      }
			}
	}

	#mean_time_to_happen = { days = 40 }

	option = {
		name = EXCELLENT
		From = {
			if = {
				limit = {		
					from.planet = {
					has_resource = {
						type = rare_crystals
						amount > 0
					}
				  }
			    }
				add_deposit = d_rare_crystals_1
			}
			else_if = {
				limit = {
					from.planet = {
						has_resource = {
							type = exotic_gases
							amount > 0
						}
					  }
				}
				add_deposit = d_exotic_gases_1
			}
			else = {
				from.planet = {
					add_deposit = d_volatile_motes_1
				  }
			}
		}
		set_timed_country_flag = { flag = asp_rare_resource_cooldown days = 780 }
	}
}